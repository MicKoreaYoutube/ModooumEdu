<!DOCTYPE html>
<html>
	<head>
		<%= csrf_meta_tags %> <%= csp_meta_tag %>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link href="https://webfontworld.github.io/onestore/OneMobilePop.css" rel="stylesheet" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
			integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
			crossorigin="anonymous"
		/>
		<style>
			.OneMobilePop {
				font-family: 'OneMobilePop';
			}
			body {
				padding-top: 75px;
			}
			* {
				word-break: keep-all;
			}
		</style>
	</head>
	<body>
		<nav
			class="navbar navbar-expand-lg fixed-top OneMobilePop"
			style="background-color: #e3f2fd;"
		>
			<div class="container-fluid">
				<a class="navbar-brand" href="/">
					<img
						src=""
						alt="Logo"
						width="180"
						height="40"
					/>
				</a>
				<button
					class="navbar-toggler"
					type="button"
					data-bs-toggle="offcanvas"
					data-bs-target="#offcanvasExample"
					aria-controls="offcanvasExample"
				>
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse">
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
						<li class="nav-item">
							<a class="nav-link" href="/dashboard/index">대쉬보드</a>
						</li>
						<li class="nav-item dropdown">
							<a
								class="nav-link dropdown-toggle"
								href="#"
								role="button"
								data-bs-toggle="dropdown"
								aria-expanded="false"
							>
								게시판
							</a>
							<ul class="dropdown-menu">
								<li><a class="dropdown-item" href="#">게시판 홈</a></li>
								<li><hr class="dropdown-divider" /></li>
								<li><a class="dropdown-item" href="#">공지사항</a></li>
								<li><a class="dropdown-item" href="#">커뮤니티</a></li>
								<li><a class="dropdown-item" href="#">질답채팅</a></li>
							</ul>
						</li>
					</ul>
					<form
						class="d-flex position-absolute start-50 translate-middle-x"
						role="search"
					>
						<input
							class="form-control me-2"
							type="search"
							placeholder="검색..."
							aria-label="Search"
						/>
						<button class="btn btn-outline-success" type="submit">
							<i class="fa-solid fa-magnifying-glass"></i>
						</button>
					</form>
					<div class="loginX">
						<a href="/login" role="button" class="btn btn-outline-success"
							><i class="fa-solid fa-right-to-bracket"></i
						></a>
					</div>
					<div class="loginO">
						<span class="text-seconary mx-3 name"></span>
						<a href="/logout" role="button" class="btn btn-outline-success"
							><i class="fa-solid fa-right-from-bracket"></i
						></a>
					</div>
				</div>
			</div>
		</nav>
		<div
			class="offcanvas offcanvas-start OneMobilePop"
			tabindex="-1"
			id="offcanvasExample"
			aria-labelledby="offcanvasExampleLabel"
		>
			<div class="offcanvas-header">
				<a href="/">
					<img
						class="offcanvas-title"
						id="offcanvasExampleLabel"
						src="https://lh3.googleusercontent.com/u/0/drive-viewer/AAOQEOQMAMZ5erE4ixj8jRjgklW6M-HStbBGa-LQV6SzXbAuMq0AXYSncWTpJ9fS06cr9YhhMDWhKUd_IYCHZ9dqRds_NTWv=w1440-h757"
						alt="Logo"
						width="180"
						height="40"
					/>
				</a>
				<button
					type="button"
					class="btn-close"
					data-bs-dismiss="offcanvas"
					aria-label="Close"
				></button>
			</div>
			<div class="offcanvas-body">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a class="nav-link" href="/dashboard/index">대쉬보드</a>
					</li>
					<li class="nav-item dropdown">
						<a
							class="nav-link dropdown-toggle"
							href="#"
							role="button"
							data-bs-toggle="dropdown"
							aria-expanded="false"
						>
							게시판
						</a>
						<ul class="dropdown-menu">
							<li><a class="dropdown-item" href="#">게시판 홈</a></li>
							<li><hr class="dropdown-divider" /></li>
							<li><a class="dropdown-item" href="#">공지사항</a></li>
							<li><a class="dropdown-item" href="#">커뮤니티</a></li>
							<li><a class="dropdown-item" href="#">질답채팅</a></li>
						</ul>
					</li>
				</ul>
				<form class="d-flex" role="search">
					<input
						class="form-control me-2"
						type="search"
						placeholder="검색..."
						aria-label="Search"
					/>
					<button class="btn btn-outline-success" type="submit">
						<i class="fa-solid fa-magnifying-glass"></i>
					</button>
				</form>
				<br />
				<div class="loginX">
					<a href="/login" role="button" class="btn btn-outline-success"
						><i class="fa-solid fa-right-to-bracket"></i
					></a>
				</div>
				<div class="loginO">
					<span class="text-seconary mx-3 name"></span>
					<a href="/logout" role="button" class="btn btn-outline-success"
						><i class="fa-solid fa-right-from-bracket"></i
					></a>
				</div>
			</div>
		</div>
		<script
			src="https://code.jquery.com/jquery-3.6.3.min.js"
			integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
			crossorigin="anonymous"
		></script>
		<% if controller.controller_name == 'dashboard' %>
		<div class="OneMobilePop">
			<style>
				@media (max-width: 1070px) {
					.m-3 {
						margin: 0 !important;
						padding: 5% 10%;
					}
				}
			</style>
			<div class="d-flex">
				<div class="d-flex flex-column flex-shrink-0 p-3 bg-light d-inline w-25" id="com">
					<a
						href="/dashboard/index"
						class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none"
					>
						<img
							src="/assets/logo(3).png"
							alt=""
							width="70"
							height="70"
						/>
						<span class="fs-4">&nbsp;Dashboard</span>
					</a>
					<hr />
					<nav
						id="navbar-example3"
						class="h-100 flex-column align-items-stretch pe-4 border-end"
					>
						<% if controller.action_name == 'index' %>
						<nav class="nav nav-pills flex-column">
							<a class="nav-link active" href="/dashboard/index"
								><i class="fa-solid fa-house"></i>&nbsp;메인</a
							>
							<a class="nav-link" href="/dashboard/plan"
								><i class="fa-solid fa-calendar-days"></i>&nbsp;내 계획</a
							>
							<a class="nav-link" href="#"
								><i class="fa-solid fa-person-chalkboard"></i>&nbsp;강좌 관련</a
							>
							<nav class="nav nav-pills flex-column">
								<a class="nav-link ms-3 my-1" href="#item-1-1"
									><i class="fa-solid fa-user-graduate"></i>&nbsp;내 강좌들</a
								>
								<a class="nav-link ms-3 my-1" href="/dashboard/create"
									><i class="fa-solid fa-plus"></i>&nbsp;강의 제작</a
								>
								<a class="nav-link ms-3 my-1" href="#item-1-2"
									><i class="fa-solid fa-chalkboard"></i>&nbsp;우리 반</a
								>
								<a class="nav-link ms-3 my-1" href="#item-1-2"
									><i class="fa-solid fa-comment"></i>&nbsp;QNA 채팅</a
								>
							</nav>
							<a class="nav-link" href="#"
								><i class="fa-solid fa-basket-shopping"></i>&nbsp;장바구니</a
							>
						</nav>
						<% end %> <% if controller.action_name == 'plan' %>
						<nav class="nav nav-pills flex-column">
							<a class="nav-link" href="/dashboard/index"
								><i class="fa-solid fa-house"></i>&nbsp;메인</a
							>
							<a class="nav-link active" href="/dashboard/plan"
								><i class="fa-solid fa-calendar-days"></i>&nbsp;내 계획</a
							>
							<a class="nav-link" href="#"
								><i class="fa-solid fa-person-chalkboard"></i>&nbsp;강좌 관련</a
							>
							<nav class="nav nav-pills flex-column">
								<a class="nav-link ms-3 my-1" href="#item-1-1"
									><i class="fa-solid fa-user-graduate"></i>&nbsp;내 강좌들</a
								>
								<a class="nav-link ms-3 my-1" href="/dashboard/create"
									><i class="fa-solid fa-plus"></i>&nbsp;강의 제작</a
								>
								<a class="nav-link ms-3 my-1" href="#item-1-2"
									><i class="fa-solid fa-chalkboard"></i>&nbsp;우리 반</a
								>
								<a class="nav-link ms-3 my-1" href="#item-1-2"
									><i class="fa-solid fa-comment"></i>&nbsp;QNA 채팅</a
								>
							</nav>
							<a class="nav-link" href="#"
								><i class="fa-solid fa-basket-shopping"></i>&nbsp;장바구니</a
							>
						</nav>
						<% end %> <% if controller.action_name == 'create' %>
						<nav class="nav nav-pills flex-column">
							<a class="nav-link" href="/dashboard/index"
								><i class="fa-solid fa-house"></i>&nbsp;메인</a
							>
							<a class="nav-link" href="/dashboard/plan"
								><i class="fa-solid fa-calendar-days"></i>&nbsp;내 계획</a
							>
							<a class="nav-link active" href="#"
								><i class="fa-solid fa-person-chalkboard"></i>&nbsp;강좌 관련</a
							>
							<nav class="nav nav-pills flex-column">
								<a class="nav-link ms-3 my-1" href="#item-1-1"
									><i class="fa-solid fa-user-graduate"></i>&nbsp;내 강좌들</a
								>
								<a class="nav-link ms-3 my-1 active" href="/dashboard/create"
									><i class="fa-solid fa-plus"></i>&nbsp;강의 제작</a
								>
								<a class="nav-link ms-3 my-1" href="#item-1-2"
									><i class="fa-solid fa-chalkboard"></i>&nbsp;우리 반</a
								>
								<a class="nav-link ms-3 my-1" href="#item-1-2"
									><i class="fa-solid fa-comment"></i>&nbsp;QNA 채팅</a
								>
							</nav>
							<a class="nav-link" href="#"
								><i class="fa-solid fa-basket-shopping"></i>&nbsp;장바구니</a
							>
						</nav>
						<% end %>
					</nav>
					<hr />
					<div class="dropup">
						<a
							href="#"
							class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle"
							data-bs-toggle="dropdown"
							aria-expanded="false"
						>
							<img
								src="/assets/logo (2).png"
								alt=""
								width="32"
								height="32"
								class="rounded-circle me-2"
							/>
							<strong class="name">MicKoreaYoutube</strong>
						</a>
						<ul class="dropdown-menu text-small shadow">
							<li><a class="dropdown-item" href="#">Settings</a></li>
							<li><a class="dropdown-item" href="#" id="profile">프로필</a></li>
							<li><hr class="dropdown-divider" /></li>
							<li><a class="dropdown-item" href="/logout">로그아웃</a></li>
						</ul>
					</div>
				</div>
				<%= yield %>
			</div>
		</div>
		<script>
			$(document).ready(function () {
				tologin();
				$(window)
					.resize(function () {
						if (window.innerWidth > 1070) {
							$('#phone').addClass('d-none');
							$('#com').removeClass('d-none');
						} else {
							$('#com').addClass('d-none');
							$('#phone').removeClass('d-none');
						}
					})
					.resize();
			});
		</script>
		<% else %> <%= yield %> <% end %>
		<footer class="OneMobilePop bg-dark text-center text-white">
			<div class="container p-4">
				<section class="mb-4">
					<a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
						><i class="fab fa-youtube"></i
					></a>
					<a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
						><i class="fab fa-instagram"></i
					></a>
					<a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
						><i class="fab fa-github"></i
					></a>
				</section>
				<section class="mb-4">
					<p>
						ModooEdu는 다양한 강의를 가지고 있습니다. 국어, 수학, 과학, 사회, 역사,
						영어, 코딩, 편집 등등...<br />다양한 강의들로 다양한 지식을 습득해보세요!
					</p>
				</section>
				<section class="">
					<div class="row">
						<div class="col-lg-3 col-md-6 mb-4 mb-md-0">
							<h5 class="text-uppercase fs-3">약관</h5>
							<ul class="list-unstyled mb-0">
								<li>
									<a href="#!" class="text-white text-decoration-none"
										>이용약관</a
									>
								</li>
								<li>
									<a href="#!" class="text-white text-decoration-none"
										>개인정보보호처리방침</a
									>
								</li>
								<li>
									<a href="#!" class="text-white text-decoration-none">법률</a>
								</li>
							</ul>
						</div>
						<div class="col-lg-3 col-md-6 mb-4 mb-md-0">
							<h5 class="text-uppercase fs-3">가이드</h5>
							<ul class="list-unstyled mb-0">
								<li>
									<a href="#!" class="text-white text-decoration-none"
										>공지사항</a
									>
								</li>
								<li>
									<a href="#!" class="text-white text-decoration-none">게시판</a>
								</li>
								<li>
									<a href="#!" class="text-white text-decoration-none"
										>공식문서</a
									>
								</li>
								<li>
									<a href="#!" class="text-white text-decoration-none"
										>관리자 문의</a
									>
								</li>
							</ul>
						</div>
						<div class="col-lg-3 col-md-6 mb-4 mb-md-0">
							<h5 class="text-uppercase fs-3">강의 관련</h5>
							<ul class="list-unstyled mb-0">
								<li>
									<a href="#!" class="text-white text-decoration-none"
										>강의 검색</a
									>
								</li>
								<li>
									<a href="#!" class="text-white text-decoration-none"
										>강의 제작</a
									>
								</li>
								<li>
									<a href="#!" class="text-white text-decoration-none"
										>내 강의실</a
									>
								</li>
								<li>
									<a href="#!" class="text-white text-decoration-none">우리반</a>
								</li>
							</ul>
						</div>
						<div class="col-lg-3 col-md-6 mb-4 mb-md-0">
							<h5 class="text-uppercase fs-3">소개</h5>
							<ul class="list-unstyled mb-0">
								<li>
									<a href="#!" class="text-white text-decoration-none">소개</a>
								</li>
							</ul>
						</div>
					</div>
				</section>
			</div>
			<div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
				Copyright © 2022-2023. ModooumEdu(made by MicKoreaYoutube) All rights reserved. 무단
				배포, 재배포를 엄격히 금합니다
			</div>
		</footer>
		<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
		<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>
		<script type="module">
			// Import the functions you need from the SDKs you need
			// TODO: Add SDKs for Firebase products that you want to use
			// https://firebase.google.com/docs/web/setup#available-libraries

			// Your web app's Firebase configuration
			// For Firebase JS SDK v7.20.0 and later, measurementId is optional
			const firebaseConfig = {
				apiKey: 'AIzaSyAdPBqU5oc-BvwHSa2V2A_fj9RlsUG6M6A',
				authDomain: 'modooum-8190e.firebaseapp.com',
				projectId: 'modooum-8190e',
				storageBucket: 'modooum-8190e.appspot.com',
				messagingSenderId: '305206386740',
				appId: '1:305206386740:web:f2bf906da271826479ea61',
				measurementId: 'G-9Z2TZRF683',
			};

			// Initialize Firebase
			firebase.initializeApp(firebaseConfig);
			firebase.auth().onAuthStateChanged((user) => {
				if (user) {
					// User is signed in, see docs for a list of available properties
					// https://firebase.google.com/docs/reference/js/firebase.User
					var uid = user.uid;
					$('.loginX').addClass('d-none');
					$('.loginO').removeClass('d-none');
					const db = firebase.firestore();
					db.collection('users').doc(user.uid).get().then((data)=>{
						document.querySelectorAll('.name').forEach((name) => {
							name.innerHTML = data.data().name + ' 님';
						});
					});
					<% if controller.controller_name == 'dashboard' %>
						document.querySelector('#profile').href = '/profile/' + uid
					<% end %>
				} else {
					$('.loginO').addClass('d-none');
					$('.loginX').removeClass('d-none');
				}
			});
		</script>
	</body>
</html>